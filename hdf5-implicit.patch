diff -up hdf5-1.8.18/src/H5Dio.c.implicit hdf5-1.8.18/src/H5Dio.c
--- hdf5-1.8.18/src/H5Dio.c.implicit	2016-11-04 12:41:06.000000000 -0600
+++ hdf5-1.8.18/src/H5Dio.c	2016-12-05 11:55:01.904538855 -0700
@@ -30,6 +30,7 @@
 #include "H5Iprivate.h"		/* IDs			  		*/
 #include "H5MMprivate.h"        /* Memory management                    */
 #include "H5Sprivate.h"		/* Dataspace			  	*/
+#include "H5Tprivate.h"          /* Datatype functions          */
 
 #ifdef H5_HAVE_PARALLEL
 /* Remove this if H5R_DATASET_REGION is no longer used in this file */
diff -up hdf5-1.8.18/src/H5Tprivate.h.implicit hdf5-1.8.18/src/H5Tprivate.h
--- hdf5-1.8.18/src/H5Tprivate.h.implicit	2016-11-04 12:41:07.000000000 -0600
+++ hdf5-1.8.18/src/H5Tprivate.h	2016-12-05 12:09:32.505896332 -0700
@@ -137,6 +137,7 @@ H5_DLL htri_t H5T_is_sensible(const H5T_
 H5_DLL uint32_t H5T_hash(H5F_t * file, const H5T_t *dt);
 H5_DLL herr_t H5T_set_latest_version(H5T_t *dt);
 H5_DLL herr_t H5T_patch_file(H5T_t *dt, H5F_t *f);
+H5_DLL herr_t H5T_patch_vlen_file(H5T_t *dt, H5F_t *f);
 H5_DLL htri_t H5T_is_variable_str(const H5T_t *dt);
 
 /* Reference specific functions */
diff -up hdf5-1.8.18/test/cache_common.h.implicit hdf5-1.8.18/test/cache_common.h
--- hdf5-1.8.18/test/cache_common.h.implicit	2016-11-04 12:41:07.000000000 -0600
+++ hdf5-1.8.18/test/cache_common.h	2016-12-05 12:20:59.094165051 -0700
@@ -684,6 +684,9 @@ void verify_unprotected(void);
 
 /*** H5AC level utility functions ***/
 
+hbool_t resize_configs_are_equal(const H5C_auto_size_ctl_t *a,
+    const H5C_auto_size_ctl_t *b, hbool_t compare_init);
+
 void check_and_validate_cache_hit_rate(hid_t file_id,
                                        double * hit_rate_ptr,
                                        hbool_t dump_data,
diff -up hdf5-1.8.18/testpar/t_span_tree.c.implicit hdf5-1.8.18/testpar/t_span_tree.c
--- hdf5-1.8.18/testpar/t_span_tree.c.implicit	2016-11-04 12:41:07.000000000 -0600
+++ hdf5-1.8.18/testpar/t_span_tree.c	2016-12-05 13:08:06.505403191 -0700
@@ -34,9 +34,15 @@
 
  */
 
+#define H5S_PACKAGE             /*suppress error about including H5Spkg   */
+
+/* Define this macro to indicate that the testing APIs should be available */
+#define H5S_TESTING
+
 #include "hdf5.h"
 #include "H5private.h"
 #include "testphdf5.h"
+#include "H5Spkg.h"
 
 
 static void coll_write_test(int chunk_factor);
diff -up hdf5-1.8.18/tools/perform/perf.c.implicit hdf5-1.8.18/tools/perform/perf.c
--- hdf5-1.8.18/tools/perform/perf.c.implicit	2016-11-04 12:41:07.000000000 -0600
+++ hdf5-1.8.18/tools/perform/perf.c	2016-12-05 13:17:36.125394103 -0700
@@ -24,6 +24,7 @@
 
 #include "hdf5.h"
 #include "H5private.h"
+#include "h5test.h"
 
 #ifdef H5_HAVE_PARALLEL
 
